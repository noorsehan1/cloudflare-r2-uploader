name = "cloudflare-r2-uploader"
account_id = "de2fe7999306738ad5530a2fe8d6d09b" # Ganti dengan Cloudflare Account ID
workers_dev = true
compatibility_date = "2025-12-15"

# ===================== VARIABEL GLOBAL =====================
[vars]
R2_BUCKET_FEED = "feed"
R2_BUCKET_USERIMAGE = "userimage"
R2_BUCKET_STORAGE = "storage"
UPLOAD_SECRET = "alfiyan"
ALLOWED_ORIGIN = "*"

# ===================== ENVIRONMENT PRODUCTION =====================
[env.production]
R2_BUCKET_FEED = "${{ secrets.R2_BUCKET_FEED }}"
R2_BUCKET_USERIMAGE = "${{ secrets.R2_BUCKET_USERIMAGE }}"
R2_BUCKET_STORAGE = "${{ secrets.R2_BUCKET_STORAGE }}"
UPLOAD_SECRET = "${{ secrets.UPLOAD_SECRET }}"
ALLOWED_ORIGIN = "${{ secrets.ALLOWED_ORIGIN }}"

# ===================== BUILD =====================
[build]
command = "npm install && npm run build"

# ===================== TRIGGERS =====================
[triggers]
# Bisa tambahkan cron jobs jika diperlukan
